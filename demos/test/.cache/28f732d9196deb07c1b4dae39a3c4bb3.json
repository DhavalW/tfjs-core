{"dependencies":[{"name":"/Users/nsthorat/Code/deeplearnjs-clients/topixels/tfjs-core/demos/test/package.json","includedInParent":true,"mtime":1523413746620},{"name":"/Users/nsthorat/Code/deeplearnjs-clients/topixels/tfjs-core/tsconfig.json","includedInParent":true,"mtime":1523412071325}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Pool2DProgram = function () {\n    function Pool2DProgram(convInfo, poolType, computePositions) {\n        this.variableNames = ['x'];\n        if (poolType === 'avg' && computePositions) {\n            throw new Error('Cannot compute positions for average pool.');\n        }\n        var filterHeight = convInfo.filterHeight;\n        var filterWidth = convInfo.filterWidth;\n        var strideHeight = convInfo.strideHeight;\n        var strideWidth = convInfo.strideWidth;\n        var padTop = convInfo.padInfo.top;\n        var padLeft = convInfo.padInfo.left;\n        this.outputShape = convInfo.outShape;\n        var isAvgPool = poolType === 'avg';\n        var initializationValue = '0.0';\n        if (!isAvgPool) {\n            if (poolType === 'min') {\n                initializationValue = '1.0 / 0.0';\n            } else {\n                initializationValue = '-1.0 / 0.0';\n            }\n        }\n        if (computePositions) {\n            var compareOp_1 = poolType === 'min' ? '<=' : '>=';\n            this.userCode = \"\\n        const ivec2 strides = ivec2(\" + strideHeight + \", \" + strideWidth + \");\\n        const ivec2 pads = ivec2(\" + padTop + \", \" + padLeft + \");\\n\\n        void main() {\\n          ivec4 coords = getOutputCoords();\\n          int batch = coords[0];\\n          int d = coords[3];\\n\\n          ivec2 xRCCorner = coords.yz * strides - pads;\\n          int xRCorner = xRCCorner.x;\\n          int xCCorner = xRCCorner.y;\\n\\n          // max/min x(?, ?, d) to get y(yR, yC, d).\\n          // ? = to be determined\\n          float minMaxValue = 0.0;\\n          float minMaxValueFound = 0.0;\\n          int minMaxPosition = 0;\\n          float avgValue = 0.0;\\n\\n          for (int wR = 0; wR < \" + filterHeight + \"; wR++) {\\n            int xR = xRCorner + wR;\\n\\n            if (xR < 0 || xR >= \" + convInfo.inHeight + \") {\\n              continue;\\n            }\\n\\n            for (int wC = 0; wC < \" + filterWidth + \"; wC++) {\\n              int xC = xCCorner + wC;\\n\\n              if (xC < 0 || xC >= \" + convInfo.inWidth + \") {\\n                continue;\\n              }\\n\\n              float value = getX(batch, xR, xC, d);\\n\\n              if (isNaN(value)) {\\n                setOutput(value);\\n                return;\\n              }\\n\\n              // If a min / max value has already been found, use it. If not,\\n              // use the current value.\\n              float currMinMaxValue = mix(\\n                  value, minMaxValue, minMaxValueFound);\\n              if (value \" + compareOp_1 + \" currMinMaxValue) {\\n                minMaxValue = value;\\n                minMaxValueFound = 1.0;\\n                minMaxPosition = wR * \" + filterWidth + \" + wC;\\n              }\\n            }\\n          }\\n          setOutput(float(minMaxPosition));\\n        }\\n      \";\n            return;\n        }\n        var compareOp = poolType === 'min' ? 'min' : 'max';\n        var returnValue = poolType + \"(\" + poolType + \"(\" + poolType + \"(\" + 'minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])';\n        if (poolType === 'avg') {\n            returnValue = \"avgValue / \" + filterHeight * filterWidth + \".0\";\n        }\n        var filterWidthNearestVec4 = Math.floor(filterWidth / 4) * 4;\n        var filterWidthVec4Remainder = filterWidth % 4;\n        var updateSnippet = \"\\n      if (hasNaN(values)) {\\n        setOutput(getNaN(values));\\n        return;\\n      }\\n      if (\" + isAvgPool + \") {\\n        avgValue += dot(values, ones);\\n      } else {\\n        minMaxValue = \" + compareOp + \"(values, minMaxValue);\\n      }\\n    \";\n        this.userCode = \"\\n      const ivec2 strides = ivec2(\" + strideHeight + \", \" + strideWidth + \");\\n      const ivec2 pads = ivec2(\" + padTop + \", \" + padLeft + \");\\n      const float initializationValue = \" + initializationValue + \";\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float getValue(int batch, int xR, int xC, int d) {\\n        if (xC < 0 || xC >= \" + convInfo.inWidth + \") {\\n          return initializationValue;\\n        }\\n        return getX(batch, xR, xC, d);\\n      }\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int d = coords[3];\\n\\n        ivec2 xRCCorner = coords.yz * strides - pads;\\n        int xRCorner = xRCCorner.x;\\n        int xCCorner = xRCCorner.y;\\n\\n        // max/min x(?, ?, d) to get y(yR, yC, d).\\n        // ? = to be determined\\n        vec4 minMaxValue = vec4(\" + initializationValue + \");\\n        float avgValue = 0.0;\\n\\n        for (int wR = 0; wR < \" + filterHeight + \"; wR++) {\\n          int xR = xRCorner + wR;\\n\\n          if (xR < 0 || xR >= \" + convInfo.inHeight + \") {\\n            continue;\\n          }\\n\\n          for (int wC = 0; wC < \" + filterWidthNearestVec4 + \"; wC += 4) {\\n            int xC = xCCorner + wC;\\n\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + 1, d),\\n              getValue(batch, xR, xC + 2, d),\\n              getValue(batch, xR, xC + 3, d)\\n            );\\n\\n            \" + updateSnippet + \"\\n          }\\n\\n          int xC = xCCorner + \" + filterWidthNearestVec4 + \";\\n          if (\" + (filterWidthVec4Remainder === 1) + \") {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              initializationValue,\\n              initializationValue,\\n              initializationValue\\n            );\\n            \" + updateSnippet + \"\\n          } else if (\" + (filterWidthVec4Remainder === 2) + \") {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + 1, d),\\n              initializationValue,\\n              initializationValue\\n            );\\n\\n            \" + updateSnippet + \"\\n          } else if (\" + (filterWidthVec4Remainder === 3) + \") {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + 1, d),\\n              getValue(batch, xR, xC + 2, d),\\n              initializationValue\\n            );\\n\\n            \" + updateSnippet + \"\\n          }\\n        }\\n        setOutput(\" + returnValue + \");\\n      }\\n    \";\n    }\n    return Pool2DProgram;\n}();\nexports.Pool2DProgram = Pool2DProgram;","map":{"mappings":[{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":4}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":20}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":4,"column":32}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":13}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":26}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":27,"column":6},"generated":{"line":5,"column":27}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":35}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":27,"column":28},"generated":{"line":5,"column":37}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":45}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":28,"column":6},"generated":{"line":5,"column":47}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":5,"column":63}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":28,"column":31},"generated":{"line":5,"column":65}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":13}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":26}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":6,"column":29}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":22,"column":19},"generated":{"line":6,"column":30}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":6,"column":33}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":6,"column":34}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":7,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":7,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":29,"column":21},"generated":{"line":7,"column":25}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":7,"column":30}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":29,"column":30},"generated":{"line":7,"column":34}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":7,"column":50}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":29,"column":48},"generated":{"line":7,"column":52}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":30,"column":6},"generated":{"line":8,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":8,"column":18}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":30,"column":16},"generated":{"line":8,"column":22}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":8,"column":27}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":8,"column":28}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":8,"column":72}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":30,"column":6},"generated":{"line":8,"column":73}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":31,"column":5},"generated":{"line":9,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":10,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":33,"column":10},"generated":{"line":10,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":33,"column":25},"generated":{"line":10,"column":27}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":33,"column":34},"generated":{"line":10,"column":36}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":10,"column":48}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":11,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":34,"column":10},"generated":{"line":11,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":34,"column":24},"generated":{"line":11,"column":26}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":34,"column":33},"generated":{"line":11,"column":35}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":11,"column":46}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":12,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":35,"column":10},"generated":{"line":12,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":35,"column":25},"generated":{"line":12,"column":27}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":35,"column":34},"generated":{"line":12,"column":36}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":12,"column":48}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":13,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":13,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":36,"column":24},"generated":{"line":13,"column":26}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":36,"column":33},"generated":{"line":13,"column":35}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":13,"column":46}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":14,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":14,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":37,"column":19},"generated":{"line":14,"column":21}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":37,"column":28},"generated":{"line":14,"column":30}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":37,"column":19},"generated":{"line":14,"column":37}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":37,"column":36},"generated":{"line":14,"column":38}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":14,"column":41}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":15,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":15,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":38,"column":20},"generated":{"line":15,"column":22}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":38,"column":29},"generated":{"line":15,"column":31}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":38,"column":20},"generated":{"line":15,"column":38}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":38,"column":37},"generated":{"line":15,"column":39}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":15,"column":43}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":16,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":16,"column":13}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":16,"column":24}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":39,"column":23},"generated":{"line":16,"column":27}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":39,"column":32},"generated":{"line":16,"column":36}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":16,"column":44}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":41,"column":4},"generated":{"line":17,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":41,"column":10},"generated":{"line":17,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":41,"column":22},"generated":{"line":17,"column":24}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":41,"column":35},"generated":{"line":17,"column":37}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":41,"column":4},"generated":{"line":17,"column":42}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":18,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":18,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":43,"column":30},"generated":{"line":18,"column":34}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":18,"column":39}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":19,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":19,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":44,"column":9},"generated":{"line":19,"column":13}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":19,"column":22}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":44,"column":20},"generated":{"line":19,"column":24}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":45,"column":6},"generated":{"line":20,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":20,"column":16}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":45,"column":23},"generated":{"line":20,"column":29}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":45,"column":6},"generated":{"line":20,"column":34}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":20,"column":36}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":21,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":21,"column":38}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":21,"column":49}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":47,"column":7},"generated":{"line":22,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":45,"column":6},"generated":{"line":22,"column":13}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":47,"column":13},"generated":{"line":22,"column":19}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":23,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":48,"column":30},"generated":{"line":23,"column":38}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":23,"column":50}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":49,"column":7},"generated":{"line":24,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":50,"column":5},"generated":{"line":25,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":26,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":26,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":26,"column":28}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":52,"column":26},"generated":{"line":26,"column":30}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":27,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":12},"generated":{"line":27,"column":16}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":24},"generated":{"line":27,"column":30}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":37},"generated":{"line":27,"column":43}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":24},"generated":{"line":27,"column":48}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":45},"generated":{"line":27,"column":51}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":24},"generated":{"line":27,"column":55}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":52},"generated":{"line":27,"column":58}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":27,"column":62}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":28,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":11},"generated":{"line":28,"column":17}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":28,"column":25}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":28}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":56,"column":38},"generated":{"line":28,"column":71}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":83}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":56,"column":50},"generated":{"line":28,"column":86}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":90}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":56,"column":55},"generated":{"line":28,"column":93}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":104}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":56,"column":66},"generated":{"line":28,"column":107}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":146}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":57,"column":35},"generated":{"line":28,"column":149}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":155}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":57,"column":41},"generated":{"line":28,"column":158}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":162}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":57,"column":46},"generated":{"line":28,"column":165}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":172}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":57,"column":53},"generated":{"line":28,"column":175}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":722}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":75,"column":34},"generated":{"line":28,"column":725}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":737}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":75,"column":46},"generated":{"line":28,"column":740}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":824}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":78,"column":34},"generated":{"line":28,"column":827}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":78,"column":43},"generated":{"line":28,"column":836}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":844}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":78,"column":51},"generated":{"line":28,"column":847}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":930}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":82,"column":36},"generated":{"line":28,"column":933}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":944}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":82,"column":47},"generated":{"line":28,"column":947}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":1035}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":85,"column":36},"generated":{"line":28,"column":1038}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":85,"column":45},"generated":{"line":28,"column":1047}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":1054}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":85,"column":52},"generated":{"line":28,"column":1057}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":1525}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":100,"column":26},"generated":{"line":28,"column":1528}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":1539}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":100,"column":35},"generated":{"line":28,"column":1542}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":1682}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":103,"column":40},"generated":{"line":28,"column":1685}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":28,"column":1696}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":103,"column":51},"generated":{"line":28,"column":1699}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":28,"column":1816}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":110,"column":6},"generated":{"line":29,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":111,"column":5},"generated":{"line":30,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":4},"generated":{"line":31,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":31,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":22},"generated":{"line":31,"column":24}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":35},"generated":{"line":31,"column":37}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":22},"generated":{"line":31,"column":42}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":43},"generated":{"line":31,"column":45}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":22},"generated":{"line":31,"column":50}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":51},"generated":{"line":31,"column":53}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":113,"column":4},"generated":{"line":31,"column":58}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":32,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":8},"generated":{"line":32,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":32,"column":26}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":33},"generated":{"line":32,"column":37}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":32,"column":40}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":37},"generated":{"line":32,"column":43}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":32,"column":51}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":45},"generated":{"line":32,"column":54}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":32,"column":57}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":49},"generated":{"line":32,"column":60}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":32,"column":68}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":57},"generated":{"line":32,"column":71}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":32,"column":74}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":116,"column":8},"generated":{"line":32,"column":77}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":32,"column":144}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":117,"column":4},"generated":{"line":33,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":117,"column":8},"generated":{"line":33,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":117,"column":21},"generated":{"line":33,"column":25}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":117,"column":4},"generated":{"line":33,"column":30}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":117,"column":28},"generated":{"line":33,"column":32}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":118,"column":6},"generated":{"line":34,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":118,"column":20},"generated":{"line":34,"column":26}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":118,"column":34},"generated":{"line":34,"column":42}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":118,"column":49},"generated":{"line":34,"column":57}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":118,"column":20},"generated":{"line":34,"column":68}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":118,"column":60},"generated":{"line":34,"column":71}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":118,"column":6},"generated":{"line":34,"column":75}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":119,"column":5},"generated":{"line":35,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":4},"generated":{"line":36,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":10},"generated":{"line":36,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":35},"generated":{"line":36,"column":37}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":40},"generated":{"line":36,"column":42}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":35},"generated":{"line":36,"column":47}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":46},"generated":{"line":36,"column":48}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":60},"generated":{"line":36,"column":62}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":35},"generated":{"line":36,"column":63}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":65},"generated":{"line":36,"column":67}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":121,"column":4},"generated":{"line":36,"column":68}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":122,"column":4},"generated":{"line":37,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":122,"column":10},"generated":{"line":37,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":122,"column":37},"generated":{"line":37,"column":39}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":122,"column":51},"generated":{"line":37,"column":53}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":122,"column":4},"generated":{"line":37,"column":54}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":124,"column":4},"generated":{"line":38,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":124,"column":10},"generated":{"line":38,"column":12}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":124,"column":26},"generated":{"line":38,"column":28}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":129,"column":12},"generated":{"line":38,"column":136}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":124,"column":26},"generated":{"line":38,"column":145}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":129,"column":21},"generated":{"line":38,"column":148}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":124,"column":26},"generated":{"line":38,"column":233}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":132,"column":24},"generated":{"line":38,"column":236}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":124,"column":26},"generated":{"line":38,"column":245}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":132,"column":33},"generated":{"line":38,"column":248}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":124,"column":4},"generated":{"line":38,"column":287}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":4},"generated":{"line":39,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":9},"generated":{"line":39,"column":13}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":4},"generated":{"line":39,"column":21}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":24}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":137,"column":36},"generated":{"line":39,"column":65}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":77}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":137,"column":48},"generated":{"line":39,"column":80}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":84}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":137,"column":53},"generated":{"line":39,"column":87}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":98}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":137,"column":64},"generated":{"line":39,"column":101}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":138}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":138,"column":33},"generated":{"line":39,"column":141}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":147}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":138,"column":39},"generated":{"line":39,"column":150}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":154}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":138,"column":44},"generated":{"line":39,"column":157}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":164}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":138,"column":51},"generated":{"line":39,"column":167}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":213}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":139,"column":42},"generated":{"line":39,"column":216}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":235}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":139,"column":61},"generated":{"line":39,"column":238}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":382}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":143,"column":30},"generated":{"line":39,"column":385}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":143,"column":39},"generated":{"line":39,"column":394}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":401}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":143,"column":46},"generated":{"line":39,"column":404}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":886}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":160,"column":34},"generated":{"line":39,"column":889}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":908}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":160,"column":53},"generated":{"line":39,"column":911}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":980}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":163,"column":32},"generated":{"line":39,"column":983}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":995}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":163,"column":44},"generated":{"line":39,"column":998}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1078}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":166,"column":32},"generated":{"line":39,"column":1081}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":166,"column":41},"generated":{"line":39,"column":1090}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1098}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":166,"column":49},"generated":{"line":39,"column":1101}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1178}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":170,"column":34},"generated":{"line":39,"column":1181}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1203}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":170,"column":56},"generated":{"line":39,"column":1206}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1507}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":180,"column":14},"generated":{"line":39,"column":1510}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1523}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":180,"column":27},"generated":{"line":39,"column":1526}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1575}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":183,"column":32},"generated":{"line":39,"column":1578}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1600}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":183,"column":54},"generated":{"line":39,"column":1603}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1622}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":184,"column":16},"generated":{"line":39,"column":1626}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":184,"column":45},"generated":{"line":39,"column":1655}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1656}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":184,"column":46},"generated":{"line":39,"column":1660}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1878}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":191,"column":14},"generated":{"line":39,"column":1881}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1894}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":191,"column":27},"generated":{"line":39,"column":1897}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1922}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":192,"column":23},"generated":{"line":39,"column":1926}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":192,"column":52},"generated":{"line":39,"column":1955}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":1956}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":192,"column":53},"generated":{"line":39,"column":1960}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2191}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":200,"column":14},"generated":{"line":39,"column":2194}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2207}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":200,"column":27},"generated":{"line":39,"column":2210}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2235}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":201,"column":23},"generated":{"line":39,"column":2239}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":201,"column":52},"generated":{"line":39,"column":2268}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2269}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":201,"column":53},"generated":{"line":39,"column":2273}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2515}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":209,"column":14},"generated":{"line":39,"column":2518}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2531}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":209,"column":27},"generated":{"line":39,"column":2534}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2580}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":212,"column":20},"generated":{"line":39,"column":2583}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":39,"column":2594}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":212,"column":31},"generated":{"line":39,"column":2597}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":136,"column":4},"generated":{"line":39,"column":2616}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":215,"column":3},"generated":{"line":40,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":216,"column":0},"generated":{"line":41,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":216,"column":0},"generated":{"line":41,"column":11}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":216,"column":0},"generated":{"line":41,"column":24}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":42,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":42,"column":1}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":42,"column":3}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":43,"column":0}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":43,"column":8}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":43,"column":21}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":43,"column":24}},{"source":"../../src/kernels/webgl/pool_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":43,"column":37}}],"sources":{"../../src/kernels/webgl/pool_gpu.ts":"/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {Conv2DInfo} from '../../ops/conv_util';\nimport {GPGPUProgram} from './gpgpu_math';\n\nexport class Pool2DProgram implements GPGPUProgram {\n  variableNames = ['x'];\n  outputShape: number[];\n  userCode: string;\n\n  constructor(\n      convInfo: Conv2DInfo, poolType: 'max'|'min'|'avg',\n      computePositions: boolean) {\n    if (poolType === 'avg' && computePositions) {\n      throw new Error('Cannot compute positions for average pool.');\n    }\n\n    const filterHeight = convInfo.filterHeight;\n    const filterWidth = convInfo.filterWidth;\n    const strideHeight = convInfo.strideHeight;\n    const strideWidth = convInfo.strideWidth;\n    const padTop = convInfo.padInfo.top;\n    const padLeft = convInfo.padInfo.left;\n    this.outputShape = convInfo.outShape;\n\n    const isAvgPool = poolType === 'avg';\n\n    let initializationValue = '0.0';\n    if (!isAvgPool) {\n      if (poolType === 'min') {\n        initializationValue = '1.0 / 0.0';\n      } else {\n        initializationValue = '-1.0 / 0.0';\n      }\n    }\n\n    if (computePositions) {\n      const compareOp = poolType === 'min' ? '<=' : '>=';\n\n      this.userCode = `\n        const ivec2 strides = ivec2(${strideHeight}, ${strideWidth});\n        const ivec2 pads = ivec2(${padTop}, ${padLeft});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${filterHeight}; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${convInfo.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${filterWidth}; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${convInfo.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              if (isNaN(value)) {\n                setOutput(value);\n                return;\n              }\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${compareOp} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * ${filterWidth} + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `;\n      return;\n    }\n\n    const compareOp = poolType === 'min' ? 'min' : 'max';\n\n    let returnValue = `${poolType}(${poolType}(${poolType}(` +\n        'minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])';\n    if (poolType === 'avg') {\n      returnValue = `avgValue / ${filterHeight * filterWidth}.0`;\n    }\n\n    const filterWidthNearestVec4 = Math.floor(filterWidth / 4) * 4;\n    const filterWidthVec4Remainder = filterWidth % 4;\n\n    const updateSnippet = `\n      if (hasNaN(values)) {\n        setOutput(getNaN(values));\n        return;\n      }\n      if (${isAvgPool}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${compareOp}(values, minMaxValue);\n      }\n    `;\n\n    this.userCode = `\n      const ivec2 strides = ivec2(${strideHeight}, ${strideWidth});\n      const ivec2 pads = ivec2(${padTop}, ${padLeft});\n      const float initializationValue = ${initializationValue};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${convInfo.inWidth}) {\n          return initializationValue;\n        }\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${initializationValue});\n        float avgValue = 0.0;\n\n        for (int wR = 0; wR < ${filterHeight}; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${convInfo.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${filterWidthNearestVec4}; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            ${updateSnippet}\n          }\n\n          int xC = xCCorner + ${filterWidthNearestVec4};\n          if (${filterWidthVec4Remainder === 1}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n            ${updateSnippet}\n          } else if (${filterWidthVec4Remainder === 2}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${updateSnippet}\n          } else if (${filterWidthVec4Remainder === 3}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            ${updateSnippet}\n          }\n        }\n        setOutput(${returnValue});\n      }\n    `;\n  }\n}\n"},"lineCount":null}},"hash":"0f988f97bc27278bb5416c8bc851df77","cacheData":{"env":{}}}